#MYSQL 원격 접속 허용
장장 4일간 삽질했다 눈깔 빠지는 줄 알았네


사용환경: Win10, mysql 8.0

1. 유저 IP 활성화
SERVER -> USERS and PRIVILEGES에서
원격 접속을 활성화하고자 하는 계정의 'Limit to Hosts Matching' 부분을 %(모든 IP)로 바꾼다.
특정 IP의 접속만을 원하면 저기에 특정 IP 주소를 작성하면 된다.

2. 접속 권한
GRANT ALL PRIVILEGES ON *.* TO '유저 이름'@'%';
flush privileges;
유저에게 접속 권한을 준다. 이걸 안 해서 다른 방법을 써 봤는데 답이 없었다. 당연하다.
대부분 인터넷에서도 여기까지만 나오고 다른 정보가 없는데 연결이 안 된다.
그래서 나도 며칠 삽질했다.





그렇게 찾은 다른 정보들

3-1. 우선 검색하면 나오는 bind_address는 윈도우의 my.ini 파일에 없다.
SHOW VARIABLES WHERE Variable_name = 'bind_address'; 문을 실행시키면 알 수 있다.
웬만해서는 *로 되어있을 것이다. 건들지 마라.
리눅스에서는 vi환경에서 바꿀 수 있다는데 윈도우는 모르겠다. 
SET문으로 바꾸기를 실험해봤으나 읽기 전용 값이라고 한다.
이 부분은 더 모르겠으나 일단 *로 되어있다면 그냥 두어라.

3-2. skip-networking 은 무엇인가?
윈도우의 my.ini 파일에서 찾아보면 해당 옵션이 주석 처리된 것을 볼 수 있다. 주석 처리를 한 채 두어야 한다!!
skip-networking을 활성화하면 소켓으로만 통신한다. 결국 외부 접속을 막는 셈이다.
이걸 블로그에서 활성화해야한다고 잘못 읽고 주석 처리를 해제했더니
윈도우의 소켓 에러(10061)이 발생했다.
주석 처리가 되어있다면 처리한 채 두자. 이것도 역시 건들지 마라.


+
pymysql 사용하여 파이썬과의 연동 시
host = ' ' <- 이부분에 들어갈 것은 localhost도 127.0.0.1도 아니고 내 컴퓨터 IP도 아니고 hostname도 아닌 것 같다.
가장 유력한 건 
SHOW VARIABLES WHERE Variable_name = 'hostname';
이 문장을 실행시켰을 때 뜨는 value(내 컴퓨터 이름) 이 유력해 보이는데
이부분은 팀원과 테스트했을 때 안돼서 잘 모르겠다. 해결되면 업데이트하려고 한다.
